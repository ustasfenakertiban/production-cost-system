
# üíæ –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –ø–æ—Ç–µ—Ä–∏

## –°–∏—Ç—É–∞—Ü–∏—è

–í—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ –¥–æ–±–∞–≤–∏–ª–∏ –∑–∞–ø–∏—Å—å —Ç–æ–≤–∞—Ä–∞, –∑–∞—Ç–µ–º –±—ã–ª–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ö–µ–º–µ –ë–î, –∏ **–¥–∞–Ω–Ω—ã–µ –∏—Å—á–µ–∑–ª–∏**.

–ï—Å–ª–∏ –±—ã —É –Ω–∞—Å –±—ã–ª –±—ç–∫–∞–ø, –≤–æ—Ç —á—Ç–æ –±—ã –º—ã —Å–¥–µ–ª–∞–ª–∏:

## ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å (—Å –±—ç–∫–∞–ø–∞–º–∏)

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –ü–ï–†–ï–î –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

```bash
# –ü–ï–†–ï–î –ª—é–±—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ —Å—Ö–µ–º—ã –∏–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
node scripts/backup-prisma.js create before_changes

# –í—ã–≤–æ–¥:
üîÑ –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞: backup_before_changes_2025-10-02T22-35-00-000Z.json
üìù –ü—Ä–∏—á–∏–Ω–∞: before_changes
üì• –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö...

‚úÖ –ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!
üì¶ –†–∞–∑–º–µ—Ä: 15.42 KB
üìä –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π: 127

üìã –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
   users: 1
   materials: 25
   equipment: 18
   employeeRoles: 12
   operationChains: 8
   productionOperations: 45
   products: 18
```

### –®–∞–≥ 2: –ò–∑–º–µ–Ω–µ–Ω–∏—è –∏ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –ò–∑–º–µ–Ω—è–µ–º —Å—Ö–µ–º—É
nano prisma/schema.prisma

# –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏—é
yarn prisma migrate dev --name add_new_feature
```

### –®–∞–≥ 3: –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–∞–Ω–Ω—ã–µ
node scripts/check-data.js

# –í—ã–≤–æ–¥:
‚ùå –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—É—Å—Ç–∞—è!
```

### –®–∞–≥ 4: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞

```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
node scripts/restore-prisma.js
```

**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é:**

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë       –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –ò–ó –†–ï–ó–ï–†–í–ù–û–ô –ö–û–ü–ò–ò          ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –±—ç–∫–∞–ø—ã:

1. backup_before_changes_2025-10-02T22-35-00-000Z.json
   –î–∞—Ç–∞: 02.10.2025, 22:35:00
   –†–∞–∑–º–µ—Ä: 15.42 KB
   –ó–∞–ø–∏—Å–µ–π: 127

2. backup_after_data_entry_2025-10-02T22-20-00-000Z.json
   –î–∞—Ç–∞: 02.10.2025, 22:20:00
   –†–∞–∑–º–µ—Ä: 12.18 KB
   –ó–∞–ø–∏—Å–µ–π: 95

–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–º–µ—Ä –±—ç–∫–∞–ø–∞ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (–∏–ª–∏ 0 –¥–ª—è –æ—Ç–º–µ–Ω—ã): 1

‚ö†Ô∏è  –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ "backup_before_changes_..."? (–¥–∞/–Ω–µ—Ç): –¥–∞

üì¶ –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è...
üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ...

‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤: 25
‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è: 18
‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Ä–æ–ª–µ–π: 12
‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Ü–µ–ø–æ—á–µ–∫: 8
‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –æ–ø–µ—Ä–∞—Ü–∏–π: 45
‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤: 18

‚úÖ –î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!
üìÖ –î–∞—Ç–∞ –±—ç–∫–∞–ø–∞: 2025-10-02T22:35:00.000Z
üìù –ü—Ä–∏—á–∏–Ω–∞: before_changes
üíæ –ë—ç–∫–∞–ø —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—ë–Ω –Ω–∞ —Å–ª—É—á–∞–π –æ—Ç–∫–∞—Ç–∞
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
node scripts/check-data.js

# –í—ã–≤–æ–¥:
‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!
–ú–∞—Ç–µ—Ä–∏–∞–ª—ã: 25
–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ: 18
...
```

## ‚ö†Ô∏è –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ –≤ –≤–∞—à–µ–º —Å–ª—É—á–∞–µ

1. ‚ùå **–ë—ç–∫–∞–ø –ù–ï –ë–´–õ —Å–æ–∑–¥–∞–Ω** –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
2. ‚ùå –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–∞–ª–∏–ª–∞—Å—å (—Ç–∞–±–ª–∏—Ü—ã –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–∏)
3. ‚ùå –î–∞–Ω–Ω—ã–µ –ø–æ—Ç–µ—Ä—è–Ω—ã –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

## ‚úÖ –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å —ç—Ç–æ–≥–æ –≤ –±—É–¥—É—â–µ–º

### 1. **–í–°–ï–ì–î–ê** —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏

```bash
node scripts/backup-prisma.js create before_migration
```

### 2. –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –±—ç–∫–∞–ø—ã –ø–æ—Å–ª–µ –≤–≤–æ–¥–∞ –≤–∞–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
node scripts/backup-prisma.js create after_data_entry
```

### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é (—Å –∞–≤—Ç–æ–±—ç–∫–∞–ø–æ–º)

```bash
node scripts/migrate-with-backup.js
```

### 4. –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –Ω–∞–ª–∏—á–∏–µ –±—ç–∫–∞–ø–æ–≤

```bash
node scripts/backup-prisma.js list
```

## üìä –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –≥—Ä–∞—Ñ–∏–∫ –±—ç–∫–∞–ø–æ–≤

| –ö–æ–≥–¥–∞ | –ö–æ–º–∞–Ω–¥–∞ | –ü—Ä–∏—á–∏–Ω–∞ |
|-------|---------|---------|
| –ü–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π | `backup-prisma.js create before_migration` | –ó–∞—â–∏—Ç–∞ –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ |
| –ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö | `backup-prisma.js create after_data_entry` | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã |
| –ü–µ—Ä–µ–¥ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏ | `backup-prisma.js create before_experiment` | –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞ |
| –ö–æ–Ω–µ—Ü –¥–Ω—è | `backup-prisma.js create daily_backup` | –†–µ–≥—É–ª—è—Ä–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ |

## üîß –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø
node scripts/backup-prisma.js create manual

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –±—ç–∫–∞–ø—ã
node scripts/backup-prisma.js list

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ)
node scripts/restore-prisma.js

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ
node scripts/check-data.js
```

## üí° –°–æ–≤–µ—Ç

**–°–æ–∑–¥–∞–π—Ç–µ alias –≤ –≤–∞—à–µ–º shell:**

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ ~/.bashrc –∏–ª–∏ ~/.zshrc
alias backup='cd /home/ubuntu/production_cost_system/app && node scripts/backup-prisma.js create'
alias restore='cd /home/ubuntu/production_cost_system/app && node scripts/restore-prisma.js'
alias check-db='cd /home/ubuntu/production_cost_system/app && node scripts/check-data.js'
```

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ:

```bash
backup manual
restore
check-db
```

---

**–í–ê–ñ–ù–û:** –ë—ç–∫–∞–ø—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `scripts/backups/` –∏ —Ö—Ä–∞–Ω—è—Ç—Å—è 30 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∫–æ–ø–∏–π. –°—Ç–∞—Ä—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è.
